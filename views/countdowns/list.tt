[%
    USE Math;
    PROCESS util/format.tt;
    PROCESS util/tools.tt;
%]
<div class="ui-widget">
    <div class="ui-widget-header">Countdowns</div>
    <div class="ui-widget-content" align="center">
        <p>[% PROCESS shared/pagination.tt page_data=pagination %]</p>
    </div>
    <div class=ui-widget-content>
        <table width="100%" class="pure-table pure-table-striped">
            <thead>
                <tr>
                    <th>Preview</th>
                    <th>Target Date</th>
                    <th>Realtime</th>
                    <th>On Homepage</th>
                    <th>Actions</th>
                </tr>
            </thead>
            [% FOREACH countdown IN items %]
            <tr>
                <td>
                    <strong>[% Math.int(Math.abs(countdown.time_left)) _ fraction_entity(countdown.time_left) %]</strong>
                    [% countdown.english_units %]
                    [% countdown.time_left >= 0 ? "Until" : "Since" %]
                    <a href="/countdowns/[% countdown.id %]"><strong>[% countdown.title %]</strong></a>
                </td>
                <td align="center">[% countdown.target_date.format("%b %d, %Y %I:%M:%S %p") %]</td>
                <td align="center">[% countdown.is_real_time ? 'Yes' : 'No' %]</td>
                <td align="center">[% countdown.on_homepage ? 'Yes' : 'No' %]</td>
                <td align="center">
                    [% PROCESS shared/list/actions.tt
                        controller = 'countdowns'
                        item_id = countdown.id
                        delete_message = countdown.title
                    %]
                </td>
              </tr>
            [% END %]
        </table>
        <p align="center"><a class="button" href="/countdowns/new">Add</a></p>
    </div>
</div>
<script>
    $('.button').button();

    [% PROCESS shared/list/actions_js.tt %]
</script>
